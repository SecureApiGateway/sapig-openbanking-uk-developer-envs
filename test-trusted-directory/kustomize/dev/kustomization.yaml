apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
labels:
  - includeSelectors: true
    pairs:
      app.kubernetes.io/name: forgerock
namespace: dev-core
patches:
  - path: configmap.yaml
replacements:
  - source:
      fieldPath: data.IG_FQDN
      kind: ConfigMap
      name: test-trusted-directory-config
      version: v1
    targets:
      - fieldPaths:
          - spec.rules.0.host
        select:
          group: networking.k8s.io
          kind: Ingress
          name: test-trusted-directory
          version: v1
      - fieldPaths:
          - spec.tls.0.hosts.0
        select:
          group: networking.k8s.io
          kind: Ingress
          name: test-trusted-directory
          version: v1
resources:
  - ../defaults
